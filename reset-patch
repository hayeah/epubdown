commit da2d735a715db8bfe27745e568403c9ad74d2a76
Author: Howard Yeh <hayeah@gmail.com>
Date:   Sun Jul 27 18:15:10 2025 +0800

    fix: prevent flash of previous book when switching books
    
    Reset reader store at the start of loadBookFromLibrary() to immediately clear
    the previous book's content before loading a new one. This eliminates the brief
    moment where the old book is still visible during the loading process.

diff --git a/packages/reader/src/stores/ReaderStore.md b/packages/reader/src/stores/ReaderStore.md
new file mode 100644
index 0000000..5107c99
--- /dev/null
+++ b/packages/reader/src/stores/ReaderStore.md
@@ -0,0 +1,20 @@
+# ReaderStore Notes
+
+## Book Switching Flash Fix
+
+### Problem
+When switching between books, there was a brief moment where the previous book's content was still visible before the new book loaded. This happened because:
+
+1. The URL would change to a new book ID
+2. ReaderPage's useEffect would trigger to load the new book
+3. During the loading time, the old book's content was still displayed because the `epub` state still contained the old book
+
+### Solution
+Simply call `reset()` at the beginning of `loadBookFromLibrary` to always clear the previous book's state before loading a new one.
+
+This ensures that the old book's content is cleared immediately when loading any book, preventing the flash of old content during the loading process.
+
+### Implementation Details
+- Call `reset()` at the start of `loadBookFromLibrary()`
+- This clears all book state (epub, chapters, metadata, etc.) before loading the new book
+- Simple and effective - no need to track which book is currently loaded
\ No newline at end of file
diff --git a/packages/reader/src/stores/ReaderStore.ts b/packages/reader/src/stores/ReaderStore.ts
index cf42202..d29dfdc 100644
--- a/packages/reader/src/stores/ReaderStore.ts
+++ b/packages/reader/src/stores/ReaderStore.ts
@@ -226,6 +226,9 @@ export class ReaderStore {
     bookLibraryStore: BookLibraryStore,
     initialChapter?: number,
   ) {
+    // Always reset to prevent flash of previous book content
+    this.reset();
+
     try {
       const bookData = await bookLibraryStore.loadBookForReading(bookId);
       if (!bookData) {
